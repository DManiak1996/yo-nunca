{
  "title": "Google Drive node common issues",
  "content": "Here are some common errors and issues with the [Google Drive node](../) and steps to resolve or troubleshoot them.\n\n## Google hasn't verified this app\n\nIf using the OAuth authentication method, you might see the warning **Google hasn't verified this app**. To avoid this:\n\n- If your app **User Type** is **Internal**, create OAuth credentials from the same account you want to authenticate.\n- If your app **User Type** is **External**, you can add your email to the list of testers for the app: go to the [**Audience**](https://console.cloud.google.com/auth/audience) page and add the email you're signing in with to the list of **Test users**.\n\nIf you need to use credentials generated by another account (by a developer or another third party), follow the instructions in [Google Cloud documentation | Authorization errors: Google hasn't verified this app](https://developers.google.com/nest/device-access/reference/errors/authorization#google_hasnt_verified_this_app).\n\n## Google Cloud app becoming unauthorized\n\nFor Google Cloud apps with **Publishing status** set to **Testing** and **User type** set to **External**, consent and tokens expire after seven days. Refer to [Google Cloud Platform Console Help | Setting up your OAuth consent screen](https://support.google.com/cloud/answer/10311615?hl=en#zippy=%2Ctesting) for more information. To resolve this, reconnect the app in the n8n credentials modal.\n\n## Google Drive OAuth error\n\nIf using the OAuth authentication method, you may see an error indicating that you can't sign in because the app doesn't meet Google's expectations for keeping apps secure.\n\nMost often, the actual cause of this issue is that the URLs don't match between Google's OAuth configuration and n8n. To avoid this, start by reviewing any links included in Google's error message. This will contain details about the exact error that occurred.\n\nIf you are self-hostin n8n, check the n8n configuration items used to construct external URLs. Verify that the [`N8N_EDITOR_BASE_URL`](../../../../../hosting/configuration/environment-variables/deployment/) and [`WEBHOOK_URL`](../../../../../hosting/configuration/configuration-examples/webhook-url/) environment variables use fully qualified domains.\n\n## Get recent files from Google Drive\n\nTo retrieve recent files from Google Drive, you need to sort files by modification time. To do this, you need to search for existing files and retrieve their modification times. Next you can sort the files to find the most recent file and use another Google Drive node target the file by ID.\n\nThe process looks like this:\n\n1. Add a **Google Drive** node to your canvas.\n1. Select the **File/Folder** resource and the **Search** operation.\n1. Enable **Return All** to sort through all files.\n1. Set the **What to Search** filter to **Files**.\n1. In the **Options**, set the **Fields** to **All**.\n1. Connect a **Sort** node to the output of the **Google Drive** node.\n1. Choose **Simple** sort type.\n1. Enter `modifiedTime` as the **Field Name** in the **Fields To Sort By** section.\n1. Choose **Descending** sort order.\n1. Add a **Limit** node to the output of the **Sort** node.\n1. Set **Max Items** to **1** to keep the most recent file.\n1. Connect another **Google Drive** node to the output of the **Limit** node.\n1. Select **File** as the **Resource** and the operation of your choice.\n1. In the **File** selection, choose **By ID**.\n1. Select **Expression** and enter `{{ $json.id }}` as the expression.\n\n[View workflow file](/_workflows/integrations/builtin/app-nodes/n8n-nodes-base.googledrive/get-most-recent-file.json)",
  "code_samples": [],
  "headings": [
    {
      "level": "h2",
      "text": "Google hasn't verified this app",
      "id": "google-hasn't-verified-this-app"
    },
    {
      "level": "h2",
      "text": "Google Cloud app becoming unauthorized",
      "id": "google-cloud-app-becoming-unauthorized"
    },
    {
      "level": "h2",
      "text": "Google Drive OAuth error",
      "id": "google-drive-oauth-error"
    },
    {
      "level": "h2",
      "text": "Get recent files from Google Drive",
      "id": "get-recent-files-from-google-drive"
    }
  ],
  "url": "llms-txt#google-drive-node-common-issues",
  "links": []
}