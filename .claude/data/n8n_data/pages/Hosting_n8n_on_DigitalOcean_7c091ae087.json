{
  "title": "Hosting n8n on DigitalOcean",
  "content": "This hosting guide shows you how to self-host n8n on a DigitalOcean droplet. It uses:\n\n- [Caddy](https://caddyserver.com) (a reverse proxy) to allow access to the Droplet from the internet. Caddy will also automatically create and manage SSL / TLS certificates for your n8n instance.\n- [Docker Compose](https://docs.docker.com/compose/) to create and define the application components and how they work together.\n\nSelf-hosting knowledge prerequisites\n\nSelf-hosting n8n requires technical knowledge, including:\n\n- Setting up and configuring servers and containers\n- Managing application resources and scaling\n- Securing servers and applications\n- Configuring n8n\n\nn8n recommends self-hosting for expert users. Mistakes can lead to data loss, security issues, and downtime. If you aren't experienced at managing servers, n8n recommends [n8n Cloud](https://n8n.io/cloud/).\n\nLatest and Next versions\n\nn8n releases a new minor version most weeks. The `latest` version is for production use. `next` is the most recent release. You should treat `next` as a beta: it may be unstable. To report issues, use the [forum](https://community.n8n.io/c/questions/12).\n\nCurrent `latest`: 1.118.1\\\nCurrent `next`: 1.119.0\n\n1. [Log in](https://cloud.digitalocean.com/login) to DigitalOcean.\n1. Select the project to host the Droplet, or [create a new project](https://docs.digitalocean.com/products/projects/how-to/create/).\n1. In your project, select **Droplets** from the **Manage** menu.\n1. [Create a new Droplet](https://docs.digitalocean.com/products/droplets/how-to/create/) using the [Docker image](https://marketplace.digitalocean.com/apps/docker) available on the **Marketplace** tab.\n\nWhen creating the Droplet, DigitalOcean asks you to choose a plan. For most usage levels, a basic shared CPU plan is enough.\n\nDigitalOcean lets you choose between SSH key and password-based authentication. SSH keys are considered more secure.\n\n## Log in to your Droplet and create new user\n\nThe rest of this guide requires you to log in to the Droplet using a terminal with SSH. Refer to [How to Connect to Droplets with SSH](https://docs.digitalocean.com/products/droplets/how-to/connect-with-ssh/) for more information.\n\nYou should create a new user, to avoid working as the root user:\n\n1. Create a new user:\n\n1. Follow the prompts in the CLI to finish creating the user.\n\n1. Grant the new user administrative privileges:\n\nYou can now run commands with superuser privileges by using `sudo` before the command.\n\n1. Follow the steps to set up SSH for the new user: [Add Public Key Authentication](https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-14-04#step-four-add-public-key-authentication-recommended).\n\n1. Log out of the droplet.\n\n1. Log in using SSH as the new user.\n\n## Clone configuration repository\n\nDocker Compose, n8n, and Caddy require a series of folders and configuration files. You can clone these from [this repository](https://github.com/n8n-io/n8n-docker-caddy) into the home folder of the logged-in user on your Droplet. The following steps will tell you which file to change and what changes to make.\n\nClone the repository with the following command:\n\nAnd change directory to the root of the repository you cloned:\n\n## Default folders and files\n\nThe host operating system (the DigitalOcean Droplet) copies the two folders you created to Docker containers to make them available to Docker. The two folders are:\n\n- `caddy_config`: Holds the Caddy configuration files.\n- `local_files`: A folder for files you upload or add using n8n.\n\n### Create Docker volumes\n\nTo persist the Caddy cache between restarts and speed up start times, create [a Docker volume](https://docs.docker.com/storage/volumes/) that Docker reuses between restarts:\n\nCreate a Docker volume for the n8n data:\n\nn8n typically operates on a subdomain. Create a DNS record with your provider for the subdomain and point it to the IP address of the Droplet. The exact steps for this depend on your DNS provider, but typically you need to create a new \"A\" record for the n8n subdomain. DigitalOcean provide [An Introduction to DNS Terminology, Components, and Concepts](https://www.digitalocean.com/community/tutorials/an-introduction-to-dns-terminology-components-and-concepts).\n\nn8n runs as a web application, so the Droplet needs to allow incoming access to traffic on port 80 for non-secure traffic, and port 443 for secure traffic.\n\nOpen the following ports in the Droplet's firewall by running the following two commands:\n\nn8n needs some environment variables set to pass to the application running in the Docker container. The example `.env` file contains placeholders you need to replace with values of your own.\n\nOpen the file with the following command:\n\nThe file contains inline comments to help you know what to change.\n\nRefer to [Environment variables](../../../configuration/environment-variables/) for n8n environment variables details.\n\n## The Docker Compose file\n\nThe Docker Compose file (`docker-compose.yml`) defines the services the application needs, in this case Caddy and n8n.\n\n- The Caddy service definition defines the ports it uses and the local volumes to copy to the containers.\n- The n8n service definition defines the ports it uses, the environment variables n8n needs to run (some defined in the `.env` file), and the volumes it needs to copy to the containers.\n\nThe Docker Compose file uses the environment variables set in the `.env` file, so you shouldn't need to change it's content, but to take a look, run the following command:\n\nCaddy needs to know which domains it should serve, and which port to expose to the outside world. Edit the `Caddyfile` file in the `caddy_config` folder.\n\nChange the placeholder domain to yours. If you followed the steps to name the subdomain n8n, your full domain is similar to `n8n.example.com`. The `n8n` in the `reverse_proxy` setting tells Caddy to use the service definition defined in the `docker-compose.yml` file:\n\nIf you were to use `automate.example.com`, your `Caddyfile` may look something like:\n\n## Start Docker Compose\n\nStart n8n and Caddy with the following command:\n\nThis may take a few minutes.\n\nIn your browser, open the URL formed of the subdomain and domain name defined earlier. Enter the user name and password defined earlier, and you should be able to access n8n.\n\n## Stop n8n and Caddy\n\nYou can stop n8n and Caddy with the following command:\n\nIf you run n8n using a Docker Compose file, follow these steps to update n8n:",
  "code_samples": [
    {
      "code": "adduser <username>",
      "language": "unknown"
    },
    {
      "code": "usermod -aG sudo <username>",
      "language": "unknown"
    },
    {
      "code": "git clone https://github.com/n8n-io/n8n-docker-caddy.git",
      "language": "unknown"
    },
    {
      "code": "cd n8n-docker-caddy",
      "language": "unknown"
    },
    {
      "code": "sudo docker volume create caddy_data",
      "language": "unknown"
    },
    {
      "code": "sudo docker volume create n8n_data",
      "language": "unknown"
    },
    {
      "code": "sudo ufw allow 80\nsudo ufw allow 443",
      "language": "unknown"
    },
    {
      "code": "nano .env",
      "language": "unknown"
    },
    {
      "code": "nano docker-compose.yml",
      "language": "unknown"
    },
    {
      "code": "nano caddy_config/Caddyfile",
      "language": "unknown"
    },
    {
      "code": "n8n.<domain>.<suffix> {\n    reverse_proxy n8n:5678 {\n      flush_interval -1\n    }\n}",
      "language": "unknown"
    },
    {
      "code": "automate.example.com {\n    reverse_proxy n8n:5678 {\n      flush_interval -1\n    }\n}",
      "language": "unknown"
    },
    {
      "code": "sudo docker compose up -d",
      "language": "unknown"
    },
    {
      "code": "sudo docker compose stop",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Create a Droplet",
      "id": "create-a-droplet"
    },
    {
      "level": "h2",
      "text": "Log in to your Droplet and create new user",
      "id": "log-in-to-your-droplet-and-create-new-user"
    },
    {
      "level": "h2",
      "text": "Clone configuration repository",
      "id": "clone-configuration-repository"
    },
    {
      "level": "h2",
      "text": "Default folders and files",
      "id": "default-folders-and-files"
    },
    {
      "level": "h3",
      "text": "Create Docker volumes",
      "id": "create-docker-volumes"
    },
    {
      "level": "h2",
      "text": "Set up DNS",
      "id": "set-up-dns"
    },
    {
      "level": "h2",
      "text": "Open ports",
      "id": "open-ports"
    },
    {
      "level": "h2",
      "text": "Configure n8n",
      "id": "configure-n8n"
    },
    {
      "level": "h2",
      "text": "The Docker Compose file",
      "id": "the-docker-compose-file"
    },
    {
      "level": "h2",
      "text": "Configure Caddy",
      "id": "configure-caddy"
    },
    {
      "level": "h2",
      "text": "Start Docker Compose",
      "id": "start-docker-compose"
    },
    {
      "level": "h2",
      "text": "Test your setup",
      "id": "test-your-setup"
    },
    {
      "level": "h2",
      "text": "Stop n8n and Caddy",
      "id": "stop-n8n-and-caddy"
    },
    {
      "level": "h2",
      "text": "Updating",
      "id": "updating"
    }
  ],
  "url": "llms-txt#hosting-n8n-on-digitalocean",
  "links": []
}