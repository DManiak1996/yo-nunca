{
  "title": "Salesforce credentials",
  "content": "You can use these credentials to authenticate the following nodes:\n\n- [Salesforce](../../app-nodes/n8n-nodes-base.salesforce/)\n- [Salesforce trigger](../../trigger-nodes/n8n-nodes-base.salesforcetrigger/)\n\n## Supported authentication methods\n\nRefer to [Salesforce's developer documentation](https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_intro.htm) for more information about the service.\n\nTo configure this credential, you'll need a [Salesforce](https://www.salesforce.com/) account and:\n\n- Your **Environment Type** (Production or Sandbox)\n- A **Client ID**: Generated when you create a connected app.\n- Your Salesforce **Username**\n- A **Private Key** for a self-signed digital certificate\n\nTo set things up, first you'll create a private key and certificate, then a connected app:\n\n1. In n8n, select the **Environment Type** for your connection. Choose the option that best describes your environment from **Production** or **Sandbox**.\n1. Enter your Salesforce **Username**.\n1. Log in to your org in Salesforce.\n1. You'll need a private key and certificate issued by a certification authority. Use your own key/cert or use OpenSSL to create a key and a self-signed digital certificate. Refer to the Salesforce [Create a Private Key and Self-Signed Digital Certificate documentation](https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_auth_key_and_cert.htm) for instructions on creating your own key and certificate.\n1. From **Setup** in Salesforce, enter `App Manager` in the Quick Find box, then select **App Manager**.\n1. On the App Manager page, select **New Connected App**.\n1. Enter the required **Basic Info** for your connected app, including a **Name** and **Contact Email address**. Refer to Salesforce's [Configure Basic Connected App Settings](https://help.salesforce.com/s/articleView?id=sf.connected_app_create_basics.htm&type=5) documentation for more information.\n1. Check the box to **Enable OAuth Settings**.\n1. For the **Callback URL**, enter `http://localhost:1717/OauthRedirect`.\n1. Check the box to **Use digital signatures**.\n1. Select **Choose File** and upload the file that contains your digital certificate, such as `server.crt`.\n1. Add these **OAuth scopes**:\n   - **Full access (full)**\n   - **Perform requests at any time (refresh_token, offline_access)**\n1. Select **Save**, then **Continue**. The **Manage Connected Apps** page should open to the app you just created.\n1. In the **API (Enable OAuth Settings)** section, select **Manage Consumer Details**.\n1. Copy the **Consumer Key** and add it to your n8n credential as the **Client ID**.\n1. Enter the contents of the private key file in n8n as **Private Key**.\n   - Use the multi-line editor in n8n.\n\n- Enter the private key in standard PEM key format:\n\nThese steps are what's required on the n8n side. Salesforce recommends setting refresh token policies, session policies, and OAuth policies too:\n\n14. In Salesforce, select **Back to Manage Connected Apps**.\n01. Select **Manage**.\n01. Select **Edit Policies**.\n01. Review the **Refresh Token Policy** field. Salesforce recommends using expire refresh token after 90 days.\n01. In the **Session Policies** section, Salesforce recommends setting **Timeout Value** to 15 minutes.\n01. In the **OAuth Policies** section, select **Admin approved users are pre-authorized for permitted users** for **Permitted Users**, and select **OK**.\n01. Select **Save**.\n01. Select **Manage Profiles**, select the profiles that are pre-authorized to use this connected app, and select **Save**.\n01. Select **Manage Permission Sets** to select the permission sets. Create permission sets if necessary.\n\nRefer to Salesforce's [Create a Connected App in Your Org](https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_auth_connected_app.htm) documentation for more information.\n\nTo configure this credential, you'll need a [Salesforce](https://www.salesforce.com/) account.\n\nNote for n8n Cloud users\n\nCloud users don't need to provide connection details. Select **Connect my account** to connect through your browser.\n\nCloud and hosted users will need to select your **Environment Type**. Choose between **Production** and **Sandbox**.\n\nIf you're [self-hosting](../../../../hosting/) n8n, you'll need to configure OAuth2 from scratch by creating a connected app:\n\n1. In n8n, select the **Environment Type** for your connection. Choose the option that best describes your environment from **Production** or **Sandbox**.\n1. Enter your Salesforce **Username**.\n1. Log in to your org in Salesforce.\n1. From **Setup** in Salesforce, enter `App Manager` in the Quick Find box, then select **App Manager**.\n1. On the App Manager page, select **New Connected App**.\n1. Enter the required **Basic Info** for your connected app, including a **Name** and **Contact Email address**. Refer to Salesforce's [Configure Basic Connected App Settings](https://help.salesforce.com/s/articleView?id=sf.connected_app_create_basics.htm&type=5) documentation for more information.\n1. Check the box to **Enable OAuth Settings**.\n1. For the **Callback URL**, enter `http://localhost:1717/OauthRedirect`.\n1. Add these **OAuth scopes**:\n   - **Full access (full)**\n   - **Perform requests at any time (refresh_token, offline_access)**\n1. Make sure the following settings are unchecked:\n   - **Require Proof Key for Code Exchange (PKCE) Extension for Supported Authorization Flows**\n   - **Require Secret for Web Server Flow**\n   - **Require Secret for Refresh Token Flow**\n1. Select **Save**, then **Continue**. The **Manage Connected Apps** page should open to the app you just created.\n1. In the **API (Enable OAuth Settings)** section, select **Manage Consumer Details**.\n1. Copy the **Consumer Key** and add it to your n8n credential as the **Client ID**.\n1. Copy the **Consumer Secret** and add it to your n8n credential as the **Client Secret**.\n\nThese steps are what's required on the n8n side. Salesforce recommends setting refresh token policies and session policies, too:\n\n14. In Salesforce, select **Back to Manage Connected Apps**.\n01. Select **Manage**.\n01. Select **Edit Policies**.\n01. Review the **Refresh Token Policy** field. Salesforce recommends using expire refresh token after 90 days.\n01. In the **Session Policies** section, Salesforce recommends setting **Timeout Value** to 15 minutes.\n\nRefer to Salesforce's [Create a Connected App in Your Org](https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_auth_connected_app.htm) documentation for more information.",
  "code_samples": [
    {
      "code": "-----BEGIN PRIVATE KEY-----\n     KEY DATA GOES HERE\n     -----END PRIVATE KEY-----",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Supported authentication methods",
      "id": "supported-authentication-methods"
    },
    {
      "level": "h2",
      "text": "Related resources",
      "id": "related-resources"
    },
    {
      "level": "h2",
      "text": "Using JWT",
      "id": "using-jwt"
    },
    {
      "level": "h2",
      "text": "Using OAuth2",
      "id": "using-oauth2"
    }
  ],
  "url": "llms-txt#salesforce-credentials",
  "links": []
}