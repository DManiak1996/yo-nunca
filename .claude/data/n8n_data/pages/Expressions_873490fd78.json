{
  "title": "Expressions",
  "content": "Expressions are a powerful feature implemented in all n8n nodes. They allow node parameters to be set dynamically based on data from:\n\n- Previous node executions\n- The workflow\n- Your n8n environment\n\nYou can also execute JavaScript within an expression, making this a convenient and easy way to manipulate data into useful parameter values without writing extensive extra code.\n\nn8n created and uses a templating language called [Tournament](https://github.com/n8n-io/tournament), and extends it with [custom methods and variables](../builtin/overview/) and [data transformation functions](../builtin/data-transformation-functions/). These features make it easier to perform common tasks like getting data from other nodes or accessing workflow metadata.\n\nn8n additionally supports two libraries:\n\n- [Luxon](https://github.com/moment/luxon/), for working with dates and time.\n- [JMESPath](https://jmespath.org/), for querying JSON.\n\nWhen writing expressions, it's helpful to understand data structure and behavior in n8n. Refer to [Data](../../data/) for more information on working with data in your workflows.\n\n## Writing expressions\n\nTo use an expression to set a parameter value:\n\n1. Hover over the parameter where you want to use an expression.\n1. Select **Expressions** in the **Fixed/Expression** toggle.\n1. Write your expression in the parameter, or select **Open expression editor** to open the expressions editor. If you use the expressions editor, you can browse the available data in the **Variable selector**. All expressions have the format `{{ your expression here }}`.\n\n### Example: Get data from webhook body\n\nConsider the following scenario: you have a webhook trigger that receives data through the webhook body. You want to extract some of that data for use in the workflow.\n\nYour webhook data looks similar to this:\n\nIn the next node in the workflow, you want to get just the value of `city`. You can use the following expression:\n\n1. Accesses the incoming JSON-formatted data using n8n's custom `$json` variable.\n1. Finds the value of `city` (in this example, \"New York\"). Note that this example uses JMESPath syntax to query the JSON data. You can also write this expression as `{{$json['body']['city']}}`.\n\n### Example: Writing longer JavaScript\n\nYou can do things like variable assignments or multiple statements in an expression, but you need to wrap your code using the syntax for an IIFE (Immediately Invoked Function Expression).\n\nThe following code use the Luxon date and time library to find the time between two dates in months. We surround the code in both the handlebar brackets for an expression and the IIFE syntax.\n\nFor common errors or issues with expressions and suggested resolution steps, refer to [Common Issues](../cookbook/expressions/common-issues/).",
  "code_samples": [
    {
      "code": "[\n  {\n    \"headers\": {\n      \"host\": \"n8n.instance.address\",\n      ...\n    },\n    \"params\": {},\n    \"query\": {},\n    \"body\": {\n      \"name\": \"Jim\",\n      \"age\": 30,\n      \"city\": \"New York\"\n    }\n  }\n]",
      "language": "unknown"
    },
    {
      "code": "{{$json.body.city}}",
      "language": "unknown"
    },
    {
      "code": "{{(()=>{\n  let end = DateTime.fromISO('2017-03-13');\n  let start = DateTime.fromISO('2017-02-13');\n  let diffInMonths = end.diff(start, 'months');\n  return diffInMonths.toObject();\n})()}}",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Writing expressions",
      "id": "writing-expressions"
    },
    {
      "level": "h3",
      "text": "Example: Get data from webhook body",
      "id": "example:-get-data-from-webhook-body"
    },
    {
      "level": "h3",
      "text": "Example: Writing longer JavaScript",
      "id": "example:-writing-longer-javascript"
    },
    {
      "level": "h2",
      "text": "Common issues",
      "id": "common-issues"
    }
  ],
  "url": "llms-txt#expressions",
  "links": []
}