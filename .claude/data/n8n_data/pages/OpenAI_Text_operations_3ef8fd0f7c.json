{
  "title": "OpenAI Text operations",
  "content": "Use this operation to message a model or classify text for violations in OpenAI. Refer to [OpenAI](../) for more information on the OpenAI node itself.\n\nPrevious node versions\n\nn8n version 1.117.0 introduces the OpenAI node V2 that supports the OpenAI Responses API. It renames the 'Message a Model' operation to 'Generate a Chat Completion' to clarify its association with the Chat Completions API and introduces a separate 'Generate a Model Response' operation that uses the Responses API.\n\n## Generate a Chat Completion\n\nUse this operation to send a message or prompt to an OpenAI model - using the Chat Completions API - and receive a response.\n\nEnter these parameters:\n\n- **Credential to connect with**: Create or select an existing [OpenAI credential](../../../credentials/openai/).\n- **Resource**: Select **Text**.\n- **Operation**: Select **Generate a Chat Completion**.\n- **Model**: Select the model you want to use. If you’re not sure which model to use, try `gpt-4o` if you need high intelligence or `gpt-4o-mini` if you need the fastest speed and lowest cost. Refer to [Models overview | OpenAI Platform](https://platform.openai.com/docs/models) for more information.\n- **Messages**: Enter a **Text** prompt and assign a **Role** that the model will use to generate responses. Refer to [Prompt engineering | OpenAI](https://platform.openai.com/docs/guides/prompt-engineering) for more information on how to write a better prompt by using these roles. Choose from one of these roles:\n  - **User**: Sends a message as a user and gets a response from the model.\n  - **Assistant**: Tells the model to adopt a specific tone or personality.\n  - **System**: By default, there is no system message. You can define instructions in the user message, but the instructions set in the system message are more effective. You can set more than one system message per conversation. Use this to set the model's behavior or context for the next user message.\n- **Simplify Output**: Turn on to return a simplified version of the response instead of the raw data.\n- **Output Content as JSON**: Turn on to attempt to return the response in JSON format. Compatible with `GPT-4 Turbo` and all `GPT-3.5 Turbo` models newer than `gpt-3.5-turbo-1106`.\n\n- **Frequency Penalty**: Apply a penalty to reduce the model's tendency to repeat similar lines. The range is between `0.0` and `2.0`.\n- **Maximum Number of Tokens**: Set the maximum number of tokens for the response. One token is roughly four characters for standard English text. Use this to limit the length of the output.\n- **Number of Completions**: Defaults to 1. Set the number of completions you want to generate for each prompt. Use carefully since setting a high number will quickly consume your tokens.\n- **Presence Penalty**: Apply a penalty to influence the model to discuss new topics. The range is between `0.0` and `2.0`.\n- **Output Randomness (Temperature)**: Adjust the randomness of the response. The range is between `0.0` (deterministic) and `1.0` (maximum randomness). We recommend altering this or **Output Randomness (Top P)** but not both. Start with a medium temperature (around `0.7`) and adjust based on the outputs you observe. If the responses are too repetitive or rigid, increase the temperature. If they’re too chaotic or off-track, decrease it. Defaults to `1.0`.\n- **Output Randomness (Top P)**: Adjust the Top P setting to control the diversity of the assistant's responses. For example, `0.5` means half of all likelihood-weighted options are considered. We recommend altering this or **Output Randomness (Temperature)** but not both. Defaults to `1.0`.\n\nRefer to [Chat Completions | OpenAI](https://platform.openai.com/docs/api-reference/chat) documentation for more information.\n\n## Generate a Model Response\n\nUse this operation to send a message or prompt to an OpenAI model - using the Responses API - and receive a response.\n\nEnter these parameters:\n\n- **Credential to connect with**: Create or select an existing [OpenAI credential](../../../credentials/openai/).\n- **Resource**: Select **Text**.\n- **Operation**: Select **Generate a Model Response**.\n- **Model**: Select the model you want to use. Refer to [Models overview | OpenAI Platform](https://platform.openai.com/docs/models) for an overview.\n- **Messages**: Choose from one of these a **Message Types**:\n  - **Text**: Enter a **Text** prompt and assign a **Role** that the model will use to generate responses. Refer to [Prompt engineering | OpenAI](https://platform.openai.com/docs/guides/prompt-engineering) for more information on how to write a better prompt by using these roles.\n  - **Image**: Provide an **Image** either through an Image URL, a File ID (using the [OpenAI Files API](https://platform.openai.com/docs/api-reference/files)) or by passing binary data from an earlier node in your workflow.\n  - **File**: Provide a **File** in a supported format (currently: PDF only), either through a File URL, a File ID (using the [OpenAI Files API](https://platform.openai.com/docs/api-reference/files)) or by passing binary data from an earlier node in your workflow.\n  - For any message type, you can choose from one of these roles:\n    - **User**: Sends a message as a user and gets a response from the model.\n    - **Assistant**: Tells the model to adopt a specific tone or personality.\n    - **System**: By default, the system message is `\"You are a helpful assistant\"`. You can define instructions in the user message, but the instructions set in the system message are more effective. You can only set one system message per conversation. Use this to set the model's behavior or context for the next user message.\n- **Simplify Output**: Turn on to return a simplified version of the response instead of the raw data.\n\nThe OpenAI Responses API provides a range of [built-in tools](https://platform.openai.com/docs/guides/tools) to enrich the model's response:\n\n- **Web Search**: Allows models to search the web for the latest information before generating a response.\n- **MCP Servers**: Allows models to connect to remote MCP servers. Find out more about using remote MCP servers as tools [here](https://platform.openai.com/docs/guides/tools-connectors-mcp).\n- **File Search**: Allow models to search your knowledgebase from previously uploaded files for relevant information before generating a response. Refer to the [OpenAI documentation](https://platform.openai.com/docs/guides/tools-file-search) for more information.\n- **Code Interpreter**: Allows models to write and run Python code in a sandboxed environment.\n\n- **Maximum Number of Tokens**: Set the maximum number of tokens for the response. One token is roughly four characters for standard English text. Use this to limit the length of the output.\n- **Output Randomness (Temperature)**: Adjust the randomness of the response. The range is between `0.0` (deterministic) and `1.0` (maximum randomness). We recommend altering this or **Output Randomness (Top P)** but not both. Start with a medium temperature (around `0.7`) and adjust based on the outputs you observe. If the responses are too repetitive or rigid, increase the temperature. If they’re too chaotic or off-track, decrease it. Defaults to `1.0`.\n- **Output Randomness (Top P)**: Adjust the Top P setting to control the diversity of the assistant's responses. For example, `0.5` means half of all likelihood-weighted options are considered. We recommend altering this or **Output Randomness (Temperature)** but not both. Defaults to `1.0`.\n- **Conversation ID**: The conversation that this response belongs to. Input items and output items from this response are automatically added to this conversation after this response completes.\n- **Previous Response ID**: The ID of the previous response to continue from. Can't be used in conjunction with Conversation ID.\n- **Reasoning**: The level of reasoning effort the model should spend to generate the response. Includes the ability to return a **Summary** of the reasoning performed by the model (for example, for debugging purposes).\n- **Store**: Whether to store the generated model response for later retrieval via API. Defaults to `true`.\n- **Output Format**: Whether to return the response as **Text**, in a specified **JSON Schema** or as a **JSON Object**.\n- **Background**: Whether to run the model in [background mode](https://platform.openai.com/docs/guides/background). This allows executing long-running tasks more reliably.\n\nRefer to [Responses | OpenAI](https://platform.openai.com/docs/api-reference/responses/create) documentation for more information.\n\n## Classify Text for Violations\n\nUse this operation to identify and flag content that might be harmful. OpenAI model will analyze the text and return a response containing:\n\n- `flagged`: A boolean field indicating if the content is potentially harmful.\n- `categories`: A list of category-specific violation flags.\n- `category_scores`: Scores for each category.\n\nEnter these parameters:\n\n- **Credential to connect with**: Create or select an existing [OpenAI credential](../../../credentials/openai/).\n- **Resource**: Select **Text**.\n- **Operation**: Select **Classify Text for Violations**.\n- **Text Input**: Enter text to classify if it violates the moderation policy.\n- **Simplify Output**: Turn on to return a simplified version of the response instead of the raw data.\n\n- **Use Stable Model**: Turn on to use the stable version of the model instead of the latest version, accuracy may be slightly lower.\n\nRefer to [Moderations | OpenAI](https://platform.openai.com/docs/api-reference/moderations) documentation for more information.\n\nFor common errors or issues and suggested resolution steps, refer to [Common Issues](../common-issues/).",
  "code_samples": [],
  "headings": [
    {
      "level": "h2",
      "text": "Generate a Chat Completion",
      "id": "generate-a-chat-completion"
    },
    {
      "level": "h3",
      "text": "Options",
      "id": "options"
    },
    {
      "level": "h2",
      "text": "Generate a Model Response",
      "id": "generate-a-model-response"
    },
    {
      "level": "h3",
      "text": "Built-in Tools",
      "id": "built-in-tools"
    },
    {
      "level": "h3",
      "text": "Options",
      "id": "options"
    },
    {
      "level": "h2",
      "text": "Classify Text for Violations",
      "id": "classify-text-for-violations"
    },
    {
      "level": "h3",
      "text": "Options",
      "id": "options"
    },
    {
      "level": "h2",
      "text": "Common issues",
      "id": "common-issues"
    }
  ],
  "url": "llms-txt#openai-text-operations",
  "links": []
}