{
  "url": "https://nextjs.org/docs/app/guides/custom-server",
  "title": "How to set up a custom server in Next.js",
  "content": "Next.js includes its own server with next start by default. If you have an existing backend, you can still use it with Next.js (this is not a custom server). A custom Next.js server allows you to programmatically start a server for custom patterns. The majority of the time, you will not need this approach. However, it's available if you need to eject.\n\nTake a look at the following example of a custom server:\n\nserver.js does not run through the Next.js Compiler or bundling process. Make sure the syntax and source code this file requires are compatible with the current Node.js version you are using. View an example.\n\nTo run the custom server, you'll need to update the scripts in package.json like so:\n\nAlternatively, you can set up nodemon (example). The custom server uses the following import to connect the server with the Next.js application:\n\nThe above next import is a function that receives an object with the following options:\n\nThe returned app can then be used to let Next.js handle requests as required.",
  "headings": [
    {
      "level": "h1",
      "text": "How to set up a custom server in Next.js",
      "id": ""
    }
  ],
  "code_samples": [
    {
      "code": "import { createServer } from 'http'\nimport { parse } from 'url'\nimport next from 'next'\n \nconst port = parseInt(process.env.PORT || '3000', 10)\nconst dev = process.env.NODE_ENV !== 'production'\nconst app = next({ dev })\nconst handle = app.getRequestHandler()\n \napp.prepare().then(() => {\n  createServer((req, res) => {\n    const parsedUrl = parse(req.url!, true)\n    handle(req, res, parsedUrl)\n  }).listen(port)\n \n  console.log(\n    `> Server listening at http://localhost:${port} as ${\n      dev ? 'development' : process.env.NODE_ENV\n    }`\n  )\n})",
      "language": "python"
    },
    {
      "code": "{\n  \"scripts\": {\n    \"dev\": \"node server.js\",\n    \"build\": \"next build\",\n    \"start\": \"NODE_ENV=production node server.js\"\n  }\n}",
      "language": "unknown"
    },
    {
      "code": "import next from 'next'\n \nconst app = next({})",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://nextjs.org/docs/app",
    "https://nextjs.org/docs/app/guides",
    "https://nextjs.org/docs/pages/building-your-application/rendering/automatic-static-optimization",
    "https://nextjs.org/docs/app/guides/css-in-js",
    "https://nextjs.org/docs/app/guides/data-security"
  ]
}