{
  "url": "https://nextjs.org/docs/pages/guides/lazy-loading",
  "title": "How to lazy load Client Components and libraries",
  "content": "Lazy loading in Next.js helps improve the initial loading performance of an application by decreasing the amount of JavaScript needed to render a route.\n\nnext/dynamic is a composite of React.lazy() and Suspense. It behaves the same way in the app and pages directories to allow for incremental migration.\n\nIn the example below, by using next/dynamic, the header component will not be included in the page's initial JavaScript bundle. The page will render the Suspense fallback first, followed by the Header component when the Suspense boundary is resolved.\n\nGood to know: In import('path/to/component'), the path must be explicitly written. It can't be a template string nor a variable. Furthermore the import() has to be inside the dynamic() call for Next.js to be able to match webpack bundles / module ids to the specific dynamic() call and preload them before rendering. dynamic() can't be used inside of React rendering as it needs to be marked in the top level of the module for preloading to work, similar to React.lazy.\n\nTo dynamically import a named export, you can return it from the Promise returned by import():\n\nTo dynamically load a component on the client side, you can use the ssr option to disable server-rendering. This is useful if an external dependency or component relies on browser APIs like window.\n\nThis example uses the external library fuse.js for fuzzy search. The module is only loaded in the browser after the user types in the search input.",
  "headings": [
    {
      "level": "h1",
      "text": "How to lazy load Client Components and libraries",
      "id": ""
    },
    {
      "level": "h2",
      "text": "next/dynamic",
      "id": "nextdynamic-1"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples-1"
    },
    {
      "level": "h3",
      "text": "With named exports",
      "id": "with-named-exports"
    },
    {
      "level": "h3",
      "text": "With no SSR",
      "id": "with-no-ssr"
    },
    {
      "level": "h3",
      "text": "With external libraries",
      "id": "with-external-libraries"
    }
  ],
  "code_samples": [
    {
      "code": "import dynamic from 'next/dynamic'\n \nconst DynamicHeader = dynamic(() => import('../components/header'), {\n  loading: () => <p>Loading...</p>,\n})\n \nexport default function Home() {\n  return <DynamicHeader />\n}",
      "language": "python"
    },
    {
      "code": "export function Hello() {\n  return <p>Hello!</p>\n}\n \n// pages/index.js\nimport dynamic from 'next/dynamic'\n \nconst DynamicComponent = dynamic(() =>\n  import('../components/hello').then((mod) => mod.Hello)\n)",
      "language": "python"
    },
    {
      "code": "'use client'\n \nimport dynamic from 'next/dynamic'\n \nconst DynamicHeader = dynamic(() => import('../components/header'), {\n  ssr: false,\n})",
      "language": "python"
    },
    {
      "code": "import { useState } from 'react'\n \nconst names = ['Tim', 'Joe', 'Bel', 'Lee']\n \nexport default function Page() {\n  const [results, setResults] = useState()\n \n  return (\n    <div>\n      <input\n        type=\"text\"\n        placeholder=\"Search\"\n        onChange={async (e) => {\n          const { value } = e.currentTarget\n          // Dynamically load fuse.js\n          const Fuse = (await import('fuse.js')).default\n          const fuse = new Fuse(names)\n \n          setResults(fuse.search(value))\n        }}\n      />\n      <pre>Results: {JSON.stringify(results, null, 2)}</pre>\n    </div>\n  )\n}",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://nextjs.org/docs/pages",
    "https://nextjs.org/docs/pages/guides",
    "https://nextjs.org/docs/pages/guides/lazy-loading",
    "https://nextjs.org/docs/pages/guides/internationalization",
    "https://nextjs.org/docs/pages/guides/mdx"
  ]
}