{
  "url": "https://nextjs.org/docs/app/guides/css-in-js",
  "title": "How to use CSS-in-JS libraries",
  "content": "Warning: Using CSS-in-JS with newer React features like Server Components and Streaming requires library authors to support the latest version of React, including concurrent rendering.\n\nThe following libraries are supported in Client Components in the app directory (alphabetical):\n\nThe following are currently working on support:\n\nGood to know: We're testing out different CSS-in-JS libraries and we'll be adding more examples for libraries that support React 18 features and/or the app directory.\n\nConfiguring CSS-in-JS is a three-step opt-in process that involves:\n\nUsing styled-jsx in Client Components requires using v5.1.0. First, create a new registry:\n\nThen, wrap your root layout with the registry:\n\nView an example here.\n\nBelow is an example of how to configure styled-components@6 or newer:\n\nFirst, enable styled-components in next.config.js.\n\nThen, use the styled-components API to create a global registry component to collect all CSS style rules generated during a render, and a function to return those rules. Then use the useServerInsertedHTML hook to inject the styles collected in the registry into the <head> HTML tag in the root layout.\n\nWrap the children of the root layout with the style registry component:\n\nView an example here.",
  "headings": [
    {
      "level": "h1",
      "text": "How to use CSS-in-JS libraries",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Configuring CSS-in-JS in app",
      "id": "configuring-css-in-js-in-app"
    },
    {
      "level": "h3",
      "text": "styled-jsx",
      "id": "styled-jsx"
    },
    {
      "level": "h3",
      "text": "Styled Components",
      "id": "styled-components"
    }
  ],
  "code_samples": [
    {
      "code": "'use client'\n \nimport React, { useState } from 'react'\nimport { useServerInsertedHTML } from 'next/navigation'\nimport { StyleRegistry, createStyleRegistry } from 'styled-jsx'\n \nexport default function StyledJsxRegistry({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  // Only create stylesheet once with lazy initial state\n  // x-ref: https://reactjs.org/docs/hooks-reference.html#lazy-initial-state\n  const [jsxStyleRegistry] = useState(() => createStyleRegistry())\n \n  useServerInsertedHTML(() => {\n    const styles = jsxStyleRegistry.styles()\n    jsxStyleRegistry.flush()\n    return <>{styles}</>\n  })\n \n  return <StyleRegistry registry={jsxStyleRegistry}>{children}</StyleRegistry>\n}",
      "language": "python"
    },
    {
      "code": "import StyledJsxRegistry from './registry'\n \nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html>\n      <body>\n        <StyledJsxRegistry>{children}</StyledJsxRegistry>\n      </body>\n    </html>\n  )\n}",
      "language": "python"
    },
    {
      "code": "module.exports = {\n  compiler: {\n    styledComponents: true,\n  },\n}",
      "language": "unknown"
    },
    {
      "code": "'use client'\n \nimport React, { useState } from 'react'\nimport { useServerInsertedHTML } from 'next/navigation'\nimport { ServerStyleSheet, StyleSheetManager } from 'styled-components'\n \nexport default function StyledComponentsRegistry({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  // Only create stylesheet once with lazy initial state\n  // x-ref: https://reactjs.org/docs/hooks-reference.html#lazy-initial-state\n  const [styledComponentsStyleSheet] = useState(() => new ServerStyleSheet())\n \n  useServerInsertedHTML(() => {\n    const styles = styledComponentsStyleSheet.getStyleElement()\n    styledComponentsStyleSheet.instance.clearTag()\n    return <>{styles}</>\n  })\n \n  if (typeof window !== 'undefined') return <>{children}</>\n \n  return (\n    <StyleSheetManager sheet={styledComponentsStyleSheet.instance}>\n      {children}\n    </StyleSheetManager>\n  )\n}",
      "language": "python"
    },
    {
      "code": "import StyledComponentsRegistry from './lib/registry'\n \nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html>\n      <body>\n        <StyledComponentsRegistry>{children}</StyledComponentsRegistry>\n      </body>\n    </html>\n  )\n}",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://nextjs.org/docs/app",
    "https://nextjs.org/docs/app/guides",
    "https://nextjs.org/docs/app/guides/css-in-js",
    "https://nextjs.org/docs/app/api-reference/file-conventions/layout",
    "https://nextjs.org/docs/architecture/nextjs-compiler",
    "https://nextjs.org/docs/app/guides/content-security-policy",
    "https://nextjs.org/docs/app/guides/custom-server"
  ]
}