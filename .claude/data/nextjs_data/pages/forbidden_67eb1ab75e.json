{
  "url": "https://nextjs.org/docs/app/api-reference/functions/forbidden",
  "title": "forbidden",
  "content": "The forbidden function throws an error that renders a Next.js 403 error page. It's useful for handling authorization errors in your application. You can customize the UI using the forbidden.js file.\n\nTo start using forbidden, enable the experimental authInterrupts configuration option in your next.config.js file:\n\nforbidden can be invoked in Server Components, Server Actions, and Route Handlers.\n\nYou can use forbidden to restrict access to certain routes based on user roles. This ensures that users who are authenticated but lack the required permissions cannot access the route.\n\nWhen implementing mutations in Server Actions, you can use forbidden to only allow users with a specific role to update sensitive data.",
  "headings": [
    {
      "level": "h1",
      "text": "forbidden",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Good to know",
      "id": "good-to-know"
    },
    {
      "level": "h2",
      "text": "Examples",
      "id": "examples"
    },
    {
      "level": "h3",
      "text": "Role-based route protection",
      "id": "role-based-route-protection"
    },
    {
      "level": "h3",
      "text": "Mutations with Server Actions",
      "id": "mutations-with-server-actions"
    },
    {
      "level": "h2",
      "text": "Version History",
      "id": "version-history"
    },
    {
      "level": "h2",
      "text": "Next Steps",
      "id": "next-steps"
    },
    {
      "level": "h3",
      "text": "forbidden.js",
      "id": ""
    }
  ],
  "code_samples": [
    {
      "code": "import type { NextConfig } from 'next'\n \nconst nextConfig: NextConfig = {\n  experimental: {\n    authInterrupts: true,\n  },\n}\n \nexport default nextConfig",
      "language": "python"
    },
    {
      "code": "import { verifySession } from '@/app/lib/dal'\nimport { forbidden } from 'next/navigation'\n \nexport default async function AdminPage() {\n  const session = await verifySession()\n \n  // Check if the user has the 'admin' role\n  if (session.role !== 'admin') {\n    forbidden()\n  }\n \n  // Render the admin page for authorized users\n  return <></>\n}",
      "language": "python"
    },
    {
      "code": "import { verifySession } from '@/app/lib/dal'\nimport { forbidden } from 'next/navigation'\n \nexport default async function AdminPage() {\n  const session = await verifySession()\n \n  // Check if the user has the 'admin' role\n  if (session.role !== 'admin') {\n    forbidden()\n  }\n \n  // Render the admin page for authorized users\n  return (\n    <main>\n      <h1>Admin Dashboard</h1>\n      <p>Welcome, {session.user.name}!</p>\n    </main>\n  )\n}",
      "language": "python"
    },
    {
      "code": "'use server'\n \nimport { verifySession } from '@/app/lib/dal'\nimport { forbidden } from 'next/navigation'\nimport db from '@/app/lib/db'\n \nexport async function updateRole(formData: FormData) {\n  const session = await verifySession()\n \n  // Ensure only admins can update roles\n  if (session.role !== 'admin') {\n    forbidden()\n  }\n \n  // Perform the role update for authorized users\n  // ...\n}",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://nextjs.org/docs/app/api-reference",
    "https://nextjs.org/docs/app/api-reference/functions",
    "https://nextjs.org/docs/app/api-reference/file-conventions/forbidden",
    "https://nextjs.org/docs/app/api-reference/config/next-config-js/authInterrupts",
    "https://nextjs.org/docs/app/getting-started/server-and-client-components",
    "https://nextjs.org/docs/app/getting-started/updating-data",
    "https://nextjs.org/docs/app/api-reference/file-conventions/route",
    "https://nextjs.org/docs/app/api-reference/functions/forbidden",
    "https://nextjs.org/docs/app/api-reference/file-conventions/layout",
    "https://nextjs.org/docs/app/api-reference/functions/fetch",
    "https://nextjs.org/docs/app/api-reference/functions/generate-image-metadata"
  ]
}