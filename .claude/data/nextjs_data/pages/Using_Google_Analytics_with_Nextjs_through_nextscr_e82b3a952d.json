{
  "url": "https://nextjs.org/docs/messages/next-script-for-ga",
  "title": "Using Google Analytics with Next.js (through `next/script`)",
  "content": "Prefer next/script component when using the inline script for Google Analytics.\n\nAn inline script was used for Google Analytics which might impact your webpage's performance. Instead, we recommend using next/script through the @next/third-parties library.\n\n@next/third-parties is a library that provides a collection of components and utilities that improve the performance and developer experience of loading popular third-party libraries in your Next.js application. It is available with Next.js 14 (install next@latest).\n\nThe GoogleAnalytics component can be used to include Google Analytics 4 to your page via the Google tag (gtag.js). By default, it fetches the original scripts after hydration occurs on the page.\n\nRecommendation: If Google Tag Manager is already included in your application, you can configure Google Analytics directly using it, rather than including Google Analytics as a separate component. Refer to the documentation to learn more about the differences between Tag Manager and gtag.js.\n\nTo load Google Analytics for all routes, include the component directly in your root layout and pass in your measurement ID:\n\nTo load Google Analytics for a single route, include the component in your page file:",
  "headings": [
    {
      "level": "h1",
      "text": "Using Google Analytics with Next.js (through `next/script`)",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Why This Error Occurred",
      "id": "why-this-error-occurred"
    },
    {
      "level": "h2",
      "text": "Possible Ways to Fix It",
      "id": "possible-ways-to-fix-it"
    },
    {
      "level": "h3",
      "text": "Use @next/third-parties to add Google Analytics",
      "id": "use-nextthird-parties-to-add-google-analytics"
    },
    {
      "level": "h2",
      "text": "Useful Links",
      "id": "useful-links"
    }
  ],
  "code_samples": [
    {
      "code": "import { GoogleAnalytics } from '@next/third-parties/google'\n \nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"en\">\n      <body>{children}</body>\n      <GoogleAnalytics gaId=\"G-XYZ\" />\n    </html>\n  )\n}",
      "language": "python"
    },
    {
      "code": "import { GoogleAnalytics } from '@next/third-parties/google'\n \nexport default function Page() {\n  return <GoogleAnalytics gaId=\"G-XYZ\" />\n}",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://nextjs.org/docs",
    "https://nextjs.org/docs/messages/next-script-for-ga",
    "https://nextjs.org/docs/pages/guides/third-party-libraries",
    "https://nextjs.org/docs/app/guides/third-party-libraries",
    "https://nextjs.org/docs/app/guides/scripts"
  ]
}