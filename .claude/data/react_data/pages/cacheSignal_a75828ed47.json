{
  "url": "https://react.dev/reference/react/cacheSignal",
  "title": "cacheSignal",
  "content": "cacheSignal is currently only used with React Server Components.\n\ncacheSignal allows you to know when the cache() lifetime is over.\n\nCall cacheSignal to get an AbortSignal.\n\nWhen React has finished rendering, the AbortSignal will be aborted. This allows you to cancel any in-flight work that is no longer needed. Rendering is considered finished when:\n\nThis function does not accept any parameters.\n\ncacheSignal returns an AbortSignal if called during rendering. Otherwise cacheSignal() returns null.\n\nCall cacheSignal to abort in-flight requests.\n\nYou canâ€™t use cacheSignal to abort async work that was started outside of rendering e.g.\n\nIf a function throws, it may be due to cancellation (e.g. the Database connection has been closed). You can use the aborted property to check if the error was due to cancellation or a real error. You may want to ignore errors that were due to cancellation.",
  "headings": [
    {
      "level": "h1",
      "text": "cacheSignal",
      "id": ""
    },
    {
      "level": "h3",
      "text": "React Server Components",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Reference",
      "id": "reference"
    },
    {
      "level": "h3",
      "text": "cacheSignal",
      "id": "cachesignal"
    },
    {
      "level": "h4",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h4",
      "text": "Returns",
      "id": "returns"
    },
    {
      "level": "h4",
      "text": "Caveats",
      "id": "caveats"
    },
    {
      "level": "h2",
      "text": "Usage",
      "id": "usage"
    },
    {
      "level": "h3",
      "text": "Cancel in-flight requests",
      "id": "cancel-in-flight-requests"
    },
    {
      "level": "h3",
      "text": "Pitfall",
      "id": ""
    },
    {
      "level": "h3",
      "text": "Ignore errors after React has finished rendering",
      "id": "ignore-errors-after-react-has-finished-rendering"
    }
  ],
  "code_samples": [
    {
      "code": "const signal = cacheSignal();",
      "language": "javascript"
    },
    {
      "code": "import {cacheSignal} from 'react';async function Component() {  await fetch(url, { signal: cacheSignal() });}",
      "language": "python"
    },
    {
      "code": "import {cache, cacheSignal} from 'react';const dedupedFetch = cache(fetch);async function Component() {  await dedupedFetch(url, { signal: cacheSignal() });}",
      "language": "python"
    },
    {
      "code": "import {cacheSignal} from 'react';// ðŸš© Pitfall: The request will not actually be aborted if the rendering of `Component` is finished.const response = fetch(url, { signal: cacheSignal() });async function Component() {  await response;}",
      "language": "python"
    },
    {
      "code": "import {cacheSignal} from \"react\";import {queryDatabase, logError} from \"./database\";async function getData(id) {  try {     return await queryDatabase(id);  } catch (x) {     if (!cacheSignal()?.aborted) {        // only log if it's a real error and not due to cancellation       logError(x);     }     return null;  }}async function Component({id}) {  const data = await getData(id);  if (data === null) {    return <div>No data available</div>;  }  return <div>{data.name}</div>;}",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://react.dev/reference/react",
    "https://react.dev/reference/react/apis",
    "https://react.dev/reference/react/cacheSignal",
    "https://react.dev/reference/rsc/server-components",
    "https://react.dev/reference/react/cache",
    "https://react.dev/reference/react/captureOwnerStack"
  ]
}