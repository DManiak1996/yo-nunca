{
  "url": "https://react.dev/reference/react/useImperativeHandle",
  "title": "useImperativeHandle",
  "content": "useImperativeHandle is a React Hook that lets you customize the handle exposed as a ref.\n\nCall useImperativeHandle at the top level of your component to customize the ref handle it exposes:\n\nSee more examples below.\n\nref: The ref you received as a prop to the MyInput component.\n\ncreateHandle: A function that takes no arguments and returns the ref handle you want to expose. That ref handle can have any type. Usually, you will return an object with the methods you want to expose.\n\noptional dependencies: The list of all reactive values referenced inside of the createHandle code. Reactive values include props, state, and all the variables and functions declared directly inside your component body. If your linter is configured for React, it will verify that every reactive value is correctly specified as a dependency. The list of dependencies must have a constant number of items and be written inline like [dep1, dep2, dep3]. React will compare each dependency with its previous value using the Object.is comparison. If a re-render resulted in a change to some dependency, or if you omitted this argument, your createHandle function will re-execute, and the newly created handle will be assigned to the ref.\n\nStarting with React 19, ref is available as a prop. In React 18 and earlier, it was necessary to get the ref from forwardRef.\n\nuseImperativeHandle returns undefined.\n\nTo expose a DOM node to the parent element, pass in the ref prop to the node.\n\nWith the code above, a ref to MyInput will receive the <input> DOM node. However, you can expose a custom value instead. To customize the exposed handle, call useImperativeHandle at the top level of your component:\n\nNote that in the code above, the ref is no longer passed to the <input>.\n\nFor example, suppose you don’t want to expose the entire <input> DOM node, but you want to expose two of its methods: focus and scrollIntoView. To do this, keep the real browser DOM in a separate ref. Then use useImperativeHandle to expose a handle with only the methods that you want the parent component to call:\n\nNow, if the parent component gets a ref to MyInput, it will be able to call the focus and scrollIntoView methods on it. However, it will not have full access to the underlying <input> DOM node.\n\nThe methods you expose via an imperative handle don’t have to match the DOM methods exactly. For example, this Post component exposes a scrollAndFocusAddComment method via an imperative handle. This lets the parent Page scroll the list of comments and focus the input field when you click the button:\n\nDo not overuse refs. You should only use refs for imperative behaviors that you can’t express as props: for example, scrolling to a node, focusing a node, triggering an animation, selecting text, and so on.\n\nIf you can express something as a prop, you should not use a ref. For example, instead of exposing an imperative handle like { open, close } from a Modal component, it is better to take isOpen as a prop like <Modal isOpen={isOpen} />. Effects can help you expose imperative behaviors via props.",
  "headings": [
    {
      "level": "h1",
      "text": "useImperativeHandle",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Reference",
      "id": "reference"
    },
    {
      "level": "h3",
      "text": "useImperativeHandle(ref, createHandle, dependencies?)",
      "id": "useimperativehandle"
    },
    {
      "level": "h4",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h3",
      "text": "Note",
      "id": ""
    },
    {
      "level": "h4",
      "text": "Returns",
      "id": "returns"
    },
    {
      "level": "h2",
      "text": "Usage",
      "id": "usage"
    },
    {
      "level": "h3",
      "text": "Exposing a custom ref handle to the parent component",
      "id": "exposing-a-custom-ref-handle-to-the-parent-component"
    },
    {
      "level": "h3",
      "text": "Exposing your own imperative methods",
      "id": "exposing-your-own-imperative-methods"
    },
    {
      "level": "h3",
      "text": "Pitfall",
      "id": ""
    }
  ],
  "code_samples": [
    {
      "code": "useImperativeHandle(ref, createHandle, dependencies?)",
      "language": "unknown"
    },
    {
      "code": "import { useImperativeHandle } from 'react';function MyInput({ ref }) {  useImperativeHandle(ref, () => {    return {      // ... your methods ...    };  }, []);  // ...",
      "language": "python"
    },
    {
      "code": "function MyInput({ ref }) {  return <input ref={ref} />;};",
      "language": "unknown"
    },
    {
      "code": "import { useImperativeHandle } from 'react';function MyInput({ ref }) {  useImperativeHandle(ref, () => {    return {      // ... your methods ...    };  }, []);  return <input />;};",
      "language": "python"
    },
    {
      "code": "import { useRef, useImperativeHandle } from 'react';function MyInput({ ref }) {  const inputRef = useRef(null);  useImperativeHandle(ref, () => {    return {      focus() {        inputRef.current.focus();      },      scrollIntoView() {        inputRef.current.scrollIntoView();      },    };  }, []);  return <input ref={inputRef} />;};",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://react.dev/reference/react",
    "https://react.dev/reference/react/hooks",
    "https://react.dev/reference/react/useImperativeHandle",
    "https://react.dev/learn/manipulating-the-dom-with-refs",
    "https://react.dev/learn/editor-setup",
    "https://react.dev/reference/react/forwardRef",
    "https://react.dev/learn/synchronizing-with-effects",
    "https://react.dev/reference/react/useId",
    "https://react.dev/reference/react/useInsertionEffect"
  ]
}