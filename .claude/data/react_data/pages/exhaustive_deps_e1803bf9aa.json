{
  "url": "https://react.dev/reference/eslint-plugin-react-hooks/lints/exhaustive-deps",
  "title": "exhaustive-deps",
  "content": "Validates that dependency arrays for React hooks contain all necessary dependencies.\n\nReact hooks like useEffect, useMemo, and useCallback accept dependency arrays. When a value referenced inside these hooks isn’t included in the dependency array, React won’t re-run the effect or recalculate the value when that dependency changes. This causes stale closures where the hook uses outdated values.\n\nThis error often happens when you try to “trick” React about dependencies to control when an effect runs. Effects should synchronize your component with external systems. The dependency array tells React which values the effect uses, so React knows when to re-synchronize.\n\nIf you find yourself fighting with the linter, you likely need to restructure your code. See Removing Effect Dependencies to learn how.\n\nExamples of incorrect code for this rule:\n\nExamples of correct code for this rule:\n\nYou have an effect, but you’re creating a new function on every render:\n\nIn most cases, you don’t need the effect. Call the function where the action happens instead:\n\nIf you genuinely need the effect (for example, to subscribe to something external), make the dependency stable:\n\nYou want to run an effect once on mount, but the linter complains about missing dependencies:\n\nEither include the dependency (recommended) or use a ref if you truly need to run once:\n\nYou can configure custom effect hooks using shared ESLint settings (available in eslint-plugin-react-hooks 6.1.1 and later):\n\nFor backward compatibility, this rule also accepts a rule-level option:",
  "headings": [
    {
      "level": "h1",
      "text": "exhaustive-deps",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Rule Details",
      "id": "rule-details"
    },
    {
      "level": "h2",
      "text": "Common Violations",
      "id": "common-violations"
    },
    {
      "level": "h3",
      "text": "Invalid",
      "id": "invalid"
    },
    {
      "level": "h3",
      "text": "Valid",
      "id": "valid"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h3",
      "text": "Adding a function dependency causes infinite loops",
      "id": "function-dependency-loops"
    },
    {
      "level": "h3",
      "text": "Running an effect only once",
      "id": "effect-on-mount"
    },
    {
      "level": "h2",
      "text": "Options",
      "id": "options"
    }
  ],
  "code_samples": [
    {
      "code": "// ❌ Missing dependencyuseEffect(() => {  console.log(count);}, []); // Missing 'count'// ❌ Missing propuseEffect(() => {  fetchUser(userId);}, []); // Missing 'userId'// ❌ Incomplete dependenciesuseMemo(() => {  return items.sort(sortOrder);}, [items]); // Missing 'sortOrder'",
      "language": "javascript"
    },
    {
      "code": "// ✅ All dependencies includeduseEffect(() => {  console.log(count);}, [count]);// ✅ All dependencies includeduseEffect(() => {  fetchUser(userId);}, [userId]);",
      "language": "javascript"
    },
    {
      "code": "// ❌ Causes infinite loopconst logItems = () => {  console.log(items);};useEffect(() => {  logItems();}, [logItems]); // Infinite loop!",
      "language": "javascript"
    },
    {
      "code": "// ✅ Call it from the event handlerconst logItems = () => {  console.log(items);};return <button onClick={logItems}>Log</button>;// ✅ Or derive during render if there's no side effectitems.forEach(item => {  console.log(item);});",
      "language": "javascript"
    },
    {
      "code": "// ✅ useCallback keeps the function reference stableconst logItems = useCallback(() => {  console.log(items);}, [items]);useEffect(() => {  logItems();}, [logItems]);// ✅ Or move the logic straight into the effectuseEffect(() => {  console.log(items);}, [items]);",
      "language": "javascript"
    },
    {
      "code": "// ❌ Missing dependencyuseEffect(() => {  sendAnalytics(userId);}, []); // Missing 'userId'",
      "language": "javascript"
    },
    {
      "code": "// ✅ Include dependencyuseEffect(() => {  sendAnalytics(userId);}, [userId]);// ✅ Or use a ref guard inside an effectconst sent = useRef(false);useEffect(() => {  if (sent.current) {    return;  }  sent.current = true;  sendAnalytics(userId);}, [userId]);",
      "language": "javascript"
    },
    {
      "code": "{  \"settings\": {    \"react-hooks\": {      \"additionalEffectHooks\": \"(useMyEffect|useCustomEffect)\"    }  }}",
      "language": "unknown"
    },
    {
      "code": "{  \"rules\": {    \"react-hooks/exhaustive-deps\": [\"warn\", {      \"additionalHooks\": \"(useMyCustomHook|useAnotherHook)\"    }]  }}",
      "language": "unknown"
    }
  ],
  "patterns": [],
  "links": [
    "https://react.dev/reference/react",
    "https://react.dev/reference/eslint-plugin-react-hooks",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/exhaustive-deps",
    "https://react.dev/learn/removing-effect-dependencies",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/rules-of-hooks"
  ]
}