{
  "url": "https://react.dev/reference/react/captureOwnerStack",
  "title": "captureOwnerStack",
  "content": "captureOwnerStack reads the current Owner Stack in development and returns it as a string if available.\n\nCall captureOwnerStack to get the current Owner Stack.\n\ncaptureOwnerStack does not take any parameters.\n\ncaptureOwnerStack returns string | null.\n\nOwner Stacks are available in\n\nIf no Owner Stack is available, null is returned (see Troubleshooting: The Owner Stack is null).\n\nThe Owner Stack is different from the Component Stack available in React error handlers like errorInfo.componentStack in onUncaughtError.\n\nFor example, consider the following code:\n\nSubComponent would throw an error. The Component Stack of that error would be\n\nHowever, the Owner Stack would only read\n\nNeither App nor the DOM components (e.g. fieldset) are considered Owners in this Stack since they didn’t contribute to “creating” the node containing SubComponent. App and DOM components only forwarded the node. App just rendered the children node as opposed to Component which created a node containing SubComponent via <SubComponent />.\n\nNeither Navigation nor legend are in the stack at all since it’s only a sibling to a node containing <SubComponent />.\n\nSubComponent is omitted because it’s already part of the callstack.\n\nIf you intercept console.error calls to highlight them in an error overlay, you can call captureOwnerStack to include the Owner Stack.\n\nThe call of captureOwnerStack happened outside of a React controlled function e.g. in a setTimeout callback, after a fetch call or in a custom DOM event handler. During render, Effects, React event handlers, and React error handlers (e.g. hydrateRoot#options.onCaughtError) Owner Stacks should be available.\n\nIn the example below, clicking the button will log an empty Owner Stack because captureOwnerStack was called during a custom DOM event handler. The Owner Stack must be captured earlier e.g. by moving the call of captureOwnerStack into the Effect body.\n\ncaptureOwnerStack is only exported in development builds. It will be undefined in production builds. If captureOwnerStack is used in files that are bundled for production and development, you should conditionally access it from a namespace import.",
  "headings": [
    {
      "level": "h1",
      "text": "captureOwnerStack",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Reference",
      "id": "reference"
    },
    {
      "level": "h3",
      "text": "captureOwnerStack()",
      "id": "captureownerstack"
    },
    {
      "level": "h4",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h4",
      "text": "Returns",
      "id": "returns"
    },
    {
      "level": "h4",
      "text": "Caveats",
      "id": "caveats"
    },
    {
      "level": "h5",
      "text": "Deep Dive",
      "id": ""
    },
    {
      "level": "h4",
      "text": "Owner Stack vs Component Stack",
      "id": "owner-stack-vs-component-stack"
    },
    {
      "level": "h2",
      "text": "Usage",
      "id": "usage"
    },
    {
      "level": "h3",
      "text": "Enhance a custom error overlay",
      "id": "enhance-a-custom-error-overlay"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h3",
      "text": "The Owner Stack is null",
      "id": "the-owner-stack-is-null"
    },
    {
      "level": "h3",
      "text": "captureOwnerStack is not available",
      "id": "captureownerstack-is-not-available"
    }
  ],
  "code_samples": [
    {
      "code": "const stack = captureOwnerStack();",
      "language": "javascript"
    },
    {
      "code": "import * as React from 'react';function Component() {  if (process.env.NODE_ENV !== 'production') {    const ownerStack = React.captureOwnerStack();    console.log(ownerStack);  }}",
      "language": "python"
    },
    {
      "code": "at SubComponentat fieldsetat Componentat mainat React.Suspenseat App",
      "language": "unknown"
    },
    {
      "code": "at Component",
      "language": "unknown"
    },
    {
      "code": "import { captureOwnerStack } from \"react\";import { instrumentedConsoleError } from \"./errorOverlay\";const originalConsoleError = console.error;console.error = function patchedConsoleError(...args) {  originalConsoleError.apply(console, args);  const ownerStack = captureOwnerStack();  onConsoleError({    // Keep in mind that in a real application, console.error can be    // called with multiple arguments which you should account for.    consoleMessage: args[0],    ownerStack,  });};",
      "language": "python"
    },
    {
      "code": "// Don't use named imports of `captureOwnerStack` in files that are bundled for development and production.import {captureOwnerStack} from 'react';// Use a namespace import instead and access `captureOwnerStack` conditionally.import * as React from 'react';if (process.env.NODE_ENV !== 'production') {  const ownerStack = React.captureOwnerStack();  console.log('Owner Stack', ownerStack);}",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://react.dev/reference/react",
    "https://react.dev/reference/react/apis",
    "https://react.dev/reference/react/captureOwnerStack",
    "https://react.dev/reference/react-dom/client/createRoot",
    "https://react.dev/reference/react-dom/client/hydrateRoot",
    "https://react.dev/reference/react/cacheSignal",
    "https://react.dev/reference/react/createContext"
  ]
}