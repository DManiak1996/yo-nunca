# üéÆ YO NUNCA - PLAN V4.0
## NUEVOS JUEGOS: "EL REY DE COPAS" üÉè Y "LA BOTELLA" üçæ

**Fecha de creaci√≥n:** 2025-10-26
**Versi√≥n:** 4.0
**Estado base:** V3.0 Production-Ready

---

## üìä ESTADO ACTUAL DEL PROYECTO

### ‚úÖ **V3.0 Completado:**
- ‚úÖ Modo Normal (cl√°sico Yo Nunca)
- ‚úÖ Modo Detectives (con votaci√≥n)
- ‚úÖ Multiplayer Local TCP (WiFi - Development Build)
- ‚úÖ **377 frases refactorizadas:**
  - Medio: 110 frases
  - Picante: 111 frases
  - Muy Picante: 156 frases
- ‚úÖ Frases personalizadas con filtro
- ‚úÖ Sistema de rachas üî• (alertas + badges visuales)
- ‚úÖ Vibraci√≥n h√°ptica (con toggle en Settings)
- ‚úÖ Age Gate (18+)
- ‚úÖ Pol√≠ticas legales V3.0
- ‚úÖ Rate limiting anti-spam
- ‚úÖ Estad√≠sticas globales
- ‚úÖ Responsive design
- ‚úÖ Dual environment (Dev Build + Expo Go)

### üìù **Cambios Recientes:**
- ‚ùå **L√≠mite de tragos:** Implementado pero eliminado por decisi√≥n de dise√±o
  - Raz√≥n: "No tiene sentido limitar algo que ocurre fuera de la app"

---mantiene)

---

## üÉè JUEGO 1: "EL REY DE COPAS" (Prioridad 1)

### üìã **Descripci√≥n:**
Juego de cartas basado en la baraja espa√±ola donde cada carta tiene un efecto √∫nico. Similar a "Kings Cup" pero con mec√°nicas propias.

### üé¥ **Baraja:**
- **Total:** 50 cartas
  - 48 cartas de baraja espa√±ola (12 cartas √ó 4 palos)
  - 2 Jokers/Comodines

### üìä **Distribuci√≥n de Efectos:**

| Carta | Cantidad | Efecto | Descripci√≥n |
|-------|----------|--------|-------------|
| **1** | 4 cartas | Repartir 1 trago | El jugador reparte 1 trago a quien quiera |
| **2** | 4 cartas | Repartir 2 tragos | El jugador reparte 2 tragos (puede dividir) |
| **3** | 4 cartas | Repartir 3 tragos | El jugador reparte 3 tragos (puede dividir) |
| **4** | 4 cartas | Repartir 4 tragos | El jugador reparte 4 tragos (puede dividir) |
| **5** | 4 cartas | Repartir 5 tragos | El jugador reparte 5 tragos (puede dividir) |
| **6** | 4 cartas | Yo Nunca | Se muestra frase aleatoria del banco |
| **7** | 4 cartas | Verdad o Reto | El jugador elige, se muestra pregunta/reto aleatorio |
| **8** | 4 cartas | T√∫ bebes | El jugador que sac√≥ la carta bebe 1 trago |
| **9** | 4 cartas | Todos beben | **PROGRESIVO:** 1er 9 = 1 trago, 2do = 2, 3er = 3, 4to = 4 |
| **Sota** | 4 cartas | Categor√≠as | Se elige categor√≠a, todos dicen ejemplos, quien falla bebe |
| **Caballo** | 4 cartas | No mirar a los ojos | No puedes mirar a nadie a los ojos hasta pr√≥ximo Caballo |
| **Rey** | 4 cartas | Cascada | Bebida en cadena - el primero puede parar cuando quiera |
| **Joker** | 2 cartas | El Payaso hace de las suyas | Se activa regla especial - **SE ACUMULAN** |

### üé≠ **Palos (Oros, Copas, Espadas, Bastos):**
- Solo efecto **est√©tico/visual**
- No modifican la mec√°nica de las cartas

### ü§° **Reglas del Joker (30 reglas totales):**

#### **REGLAS VERBALES (10):**
1. "Prohibido decir nombres propios" - Quien diga un nombre, bebe
2. "Prohibido decir n√∫meros" - Quien diga un n√∫mero, bebe
3. "Prohibido usar determinantes (el, la, los, las, un, una...)" - Bebe si lo dices
4. "Prohibido decir 'yo'" - Sustituir por "este servidor" o tu nombre
5. "Prohibido decir palabras que empiecen por 'S'" - Bebe si fallas
6. "Prohibido decir 's√≠' o 'no'" - Solo asentir/negar con la cabeza
7. "Prohibido decir palabrotas" - Quien maldiga, bebe
8. "Hablar en tercera persona" - "Pepito quiere agua" en vez de "Quiero agua"
9. "Prohibido hacer preguntas" - Solo afirmaciones, beber si preguntas
10. "Terminar cada frase con 'en la cama'" - Bebe si olvidas

#### **REGLAS DE GESTOS (8):**
11. "Mano en la cabeza al beber" - Quien olvide, bebe doble
12. "Aplaudir antes de beber" - Quien olvide, bebe doble
13. "Beber con la mano no dominante" - (zurdos con derecha, diestros con izquierda)
14. "Gui√±ar un ojo al terminar de hablar" - Bebe si olvidas
15. "Hacer un saludo militar antes de beber" - Quien olvide, trago extra
16. "Levantarse al beber" - Beber sentado = 2 tragos
17. "Pulgar en la frente al hablar" - Como un saludo indio
18. "Brindar antes de cada trago" - Aunque bebas solo

#### **REGLAS DE INTERACCI√ìN (7):**
19. "Mirar hacia arriba al re√≠rte" - Bebe si te r√≠es mirando adelante
20. "Se√±alar a alguien antes de hablar" - Bebe si hablas sin se√±alar
21. "Pedir permiso al Payaso para ir al ba√±o" - Bebe si vas sin permiso
22. "√öltimo en tocar la mesa cuando alguien dice 'suelo'" - √öltimo bebe
23. "Copiar el gesto del anterior" - Si alguien se rasca, t√∫ tambi√©n
24. "Prohibido cruzar las piernas" - Quien cruce, bebe
25. "Hablar solo al jugador de tu derecha" - Ignorar al resto

#### **REGLAS ABSURDAS/DIVERTIDAS (5):**
26. "Hablar como pirata" - "¬°Arrr! Este marinero quiere ron"
27. "Usar acento extranjero al hablar" - Franc√©s, italiano, ruso...
28. "Cantar en vez de hablar" - Todas tus frases cantadas
29. "Hablar en susurros" - Quien hable alto, bebe
30. "Inventar un apodo para cada persona" - Usar solo apodos, nada de nombres

**IMPORTANTE:** Las reglas se **ACUMULAN**. Pueden haber hasta 2 reglas activas simult√°neamente.

### üìö **Categor√≠as (Sota) - 40 categor√≠as:**

#### **Cultura General (10):**
1. Pa√≠ses de Europa
2. Capitales del mundo
3. R√≠os de Espa√±a
4. Islas famosas
5. Monumentos hist√≥ricos
6. Premios Nobel
7. Planetas del sistema solar
8. Mares y oc√©anos
9. Monta√±as famosas
10. Continentes y subcontinentes

#### **Entretenimiento (10):**
11. Pel√≠culas de Disney
12. Series de Netflix
13. Personajes de Marvel
14. Pel√≠culas de terror
15. Actores espa√±oles
16. Cantantes latinos
17. Grupos de m√∫sica rock
18. Pel√≠culas ganadoras de Oscar
19. Videojuegos famosos
20. Programas de TV espa√±oles

#### **Marcas y Productos (10):**
21. Marcas de coches
22. Marcas de ropa deportiva
23. Redes sociales
24. Marcas de refrescos
25. Compa√±√≠as de tecnolog√≠a
26. Marcas de cerveza
27. Cadenas de comida r√°pida
28. Aerol√≠neas
29. Marcas de m√≥viles
30. Tiendas de ropa

#### **Comida y Bebida (5):**
31. Frutas tropicales
32. Tipos de queso
33. Platos italianos
34. C√≥cteles con alcohol
35. Tipos de pasta

#### **Miscel√°nea (5):**
36. Deportes ol√≠mpicos
37. Instrumentos musicales
38. Profesiones
39. Animales marinos
40. Colores en ingl√©s

### üé≤ **Verdades y Retos (carta 7):**
**Formato:** Todas mezcladas aleatoriamente (sin niveles de intensidad)

**Cantidad sugerida:**
- 30 Verdades (variadas en intensidad)
- 30 Retos (variados en intensidad)
- **Total:** 60 preguntas/retos

**Nota:** Reutilizar parte del banco existente de "Modo Detectives" y a√±adir nuevas.

---

## üçæ JUEGO 2: "LA BOTELLA" (Prioridad 2)

### üìã **Descripci√≥n:**
Versi√≥n digital del cl√°sico juego de la botella con dos caracter√≠sticas √∫nicas:
1. Elecci√≥n entre **Beso** o **Prueba**
2. **Sistema de escalado** - Si toca la misma pareja m√∫ltiples veces, aumenta la intensidad

### üéØ **Mec√°nica:**

#### **Flujo del juego:**
1. Jugadores se colocan en c√≠rculo virtual (lista de jugadores)
2. Se pulsa "Girar botella" ‚Üí Animaci√≥n 2D de botella rotando
3. La botella apunta a 2 jugadores (quien gir√≥ + v√≠ctima aleatoria)
4. Se muestra: **Nivel actual** + opci√≥n de elegir **"Beso"** o **"Prueba"**
5. Se ejecuta la acci√≥n elegida
6. Se registra la pareja + nivel alcanzado

#### **Tracking de parejas:**
- La app recuerda qu√© parejas han salido juntas
- Cada vez que sale la misma pareja ‚Üí **sube 1 nivel**
- Cada pareja tiene su propio nivel independiente

### üíã **Niveles de Besos (5 niveles):**

| Nivel | Nombre | Descripci√≥n |
|-------|--------|-------------|
| 1 | Beso en la mejilla | Suave y amigable |
| 2 | Beso en la comisura | Un poco m√°s atrevido |
| 3 | Pico | Beso r√°pido en los labios |
| 4 | Morreo | Beso m√°s largo |
| 5 | L√≠o | Beso intenso y prolongado |

### üé≠ **Niveles de Pruebas (5 niveles):**

**Nivel 1 - Suave:**
- Dar un cumplido sincero
- Bailar juntos 10 segundos
- Hacer 5 flexiones
- Contar un chiste
- Cantar 10 segundos

**Nivel 2 - Media:**
- Hablar en acento extranjero durante 1 minuto
- Hacer 10 abdominales
- Imitar a alguien del grupo
- Contar una an√©cdota vergonzosa
- Intercambiar una prenda de ropa (bufanda, gorra...)

**Nivel 3 - Picante:**
- Masaje de hombros 30 segundos
- Baile sensual 20 segundos
- Confesar tu crush del grupo
- Sentarte en el regazo del otro 30 segundos
- Dar de comer algo a la otra persona

**Nivel 4 - Muy Picante:**
- Quitarte una prenda de ropa (calcetines, camiseta...)
- Bailar pegados 30 segundos
- Masaje en las piernas
- Decir 3 cosas que te gustan f√≠sicamente del otro
- Chupito del ombligo del otro

**Nivel 5 - Extremo:**
- Minuto en el armario/habitaci√≥n a solas
- Striptease de 30 segundos
- Body shot (chupito del cuerpo)
- 7 minutos en el cielo
- Ducha juntos (broma, pero se puede incluir para risas)

**Nota:** Banco total de ~25-30 pruebas mezcladas por nivel.

### üé® **Animaci√≥n de la Botella:**
- **Tipo:** Animaci√≥n 2D simple
- **Mec√°nica:** Rotaci√≥n suave con easing
- **Duraci√≥n:** 2-3 segundos de giro
- **Resultado:** Apunta a un jugador aleatorio (excluye al que gir√≥)

---

## üìÖ PLAN DE IMPLEMENTACI√ìN DETALLADO

### **FASE A: El Rey de Copas - Estructura Base (3 horas)**

#### **A.1 - Tipos TypeScript (45 min)**
**Archivo:** `src/types/cardGame.ts`

```typescript
export type CardValue = 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 'sota' | 'caballo' | 'rey' | 'joker';
export type CardSuit = 'oros' | 'copas' | 'espadas' | 'bastos' | 'joker';

export interface Card {
  id: string;
  value: CardValue;
  suit: CardSuit;
  effect: CardEffect;
}

export type CardEffect =
  | 'distribute_drinks'
  | 'yo_nunca'
  | 'truth_or_dare'
  | 'you_drink'
  | 'everyone_drinks'
  | 'categories'
  | 'no_eye_contact'
  | 'waterfall'
  | 'joker_rule';

export interface JokerRule {
  id: string;
  description: string;
  penalty: string;
  category: 'verbal' | 'gesture' | 'interaction' | 'absurd';
}

export interface CardGameState {
  deck: Card[];
  usedCards: Card[];
  currentCard: Card | null;
  activeRules: JokerRule[];
  everyoneDrinksCount: number; // Contador para el 9 progresivo (0-3)
  noEyeContactActive: boolean;
  players: Player[]; // Reutilizar de tipos existentes
}

export interface Category {
  id: string;
  name: string;
  examples: string[];
}
```

#### **A.2 - L√≥gica del Mazo (1h)**
**Archivo:** `src/hooks/useCardGame.ts`

Funciones a implementar:
- `createDeck()` - Genera las 50 cartas
- `shuffleDeck()` - Baraja aleatoriamente
- `drawCard()` - Roba una carta del mazo
- `resetDeck()` - Reinicia el mazo cuando se acaba
- `applyCardEffect()` - Ejecuta el efecto de cada carta
- `addJokerRule()` - A√±ade regla del Joker (acumulable)
- `removeJokerRule()` - Elimina regla cuando sale otro Joker (si hay 2)
- `incrementEveryoneDrinks()` - Incrementa contador del 9

#### **A.3 - Pantalla Base (1h 15min)**
**Archivo:** `src/screens/CardGameScreen.tsx`

Estructura:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      üÉè EL REY DE COPAS üç∫         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ
‚îÇ   Quedan: 42 cartas                 ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ   ‚îÇ                 ‚îÇ               ‚îÇ
‚îÇ   ‚îÇ   [CARTA 5‚ô¶]    ‚îÇ               ‚îÇ
‚îÇ   ‚îÇ                 ‚îÇ               ‚îÇ
‚îÇ   ‚îÇ  Reparte 5      ‚îÇ               ‚îÇ
‚îÇ   ‚îÇ   tragos        ‚îÇ               ‚îÇ
‚îÇ   ‚îÇ                 ‚îÇ               ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   [Robar Carta]                     ‚îÇ
‚îÇ                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚ö†Ô∏è Reglas Activas:                  ‚îÇ
‚îÇ ‚Ä¢ Prohibido decir "yo"              ‚îÇ
‚îÇ ‚Ä¢ Mano en la cabeza al beber        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üö´ No mirar a los ojos a:           ‚îÇ
‚îÇ ‚Ä¢ Juan                              ‚îÇ
‚îÇ ‚Ä¢ Mar√≠a                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **FASE B: Bancos de Contenido (2 horas)**

#### **B.1 - Categor√≠as (30 min)**
**Archivo:** `src/data/cardGame/categories.ts`

- Crear 40 categor√≠as completas
- Cada categor√≠a con 15-20 ejemplos (para validaci√≥n opcional)
- Exportar como array de objetos `Category[]`

#### **B.2 - Reglas del Joker (45 min)**
**Archivo:** `src/data/cardGame/jokerRules.ts`

- Crear las 30 reglas especificadas
- Organizadas por categor√≠a (verbal, gesture, interaction, absurd)
- Exportar como array de objetos `JokerRule[]`

#### **B.3 - Verdades y Retos (45 min)**
**Archivo:** `src/data/cardGame/truthsAndDares.ts`

- Crear 30 verdades variadas
- Crear 30 retos variados
- Mezclar intensidades (suave, medio, picante)
- Exportar como dos arrays: `truths[]` y `dares[]`

---

### **FASE C: Efectos de Cartas (3 horas)**

#### **C.1 - Cartas 1-5: Repartir Tragos (20 min)**
**Componente:** `src/components/cardGame/DistributeDrinksModal.tsx`

- Modal que muestra: "Reparte X tragos"
- Lista de jugadores con botones +/- para asignar tragos
- Validaci√≥n: total de tragos = valor de carta
- Bot√≥n "Confirmar" para cerrar

#### **C.2 - Carta 6: Yo Nunca (15 min)**
**Reutilizar:** L√≥gica existente de `GameScreenMultiplayer`

- Mostrar frase aleatoria del banco actual
- Jugadores se marcan si lo han hecho (manual)
- Bot√≥n "Continuar"

#### **C.3 - Carta 7: Verdad o Reto (25 min)**
**Componente:** `src/components/cardGame/TruthOrDareModal.tsx`

- Botones "Verdad" o "Reto"
- Mostrar pregunta/reto aleatorio del banco
- Checkbox "¬øLo cumpli√≥?" (opcional)
- Bot√≥n "Continuar"

#### **C.4 - Carta 8: T√∫ Bebes (10 min)**
**Simple:** Alert o modal breve

- "¬°T√∫ bebes! üç∫"
- Nombre del jugador que sac√≥ la carta
- Auto-cierra despu√©s de 2 segundos

#### **C.5 - Carta 9: Todos Beben (Progresivo) (25 min)**
**Componente:** `src/components/cardGame/EveryoneDrinksModal.tsx`

- Detectar cu√°ntos 9 han salido (everyoneDrinksCount)
- Mostrar: "¬°TODOS BEBEN! üçª"
- Subt√≠tulo: "Este es el 9 n√∫mero X - Todos beben X tragos"
- Animaci√≥n especial si es el 4to (√∫ltimo)
- Bot√≥n "¬°Salud!"

#### **C.6 - Carta Sota: Categor√≠as (30 min)**
**Componente:** `src/components/cardGame/CategoryGameModal.tsx`

- Mostrar categor√≠a aleatoria
- Instrucciones: "Por turnos, decid ejemplos. Quien repita o no sepa, bebe"
- Lista de jugadores para marcar qui√©n fall√≥ (opcional)
- Bot√≥n "Finalizar ronda"

#### **C.7 - Carta Caballo: No Mirar a los Ojos (20 min)**
**Estado global:** `noEyeContactActive` + lista de jugadores afectados

- Si no hay ninguno activo: Activar para el jugador que sac√≥ la carta
- Si ya hay activo: Liberar al jugador anterior, activar para el nuevo
- Mostrar permanentemente en pantalla: "üö´ No mirar a los ojos a: [Nombre]"
- Alert: "¬°No puedes mirar a nadie a los ojos hasta que salga otro Caballo!"

#### **C.8 - Carta Rey: Cascada (30 min)**
**Componente:** `src/components/cardGame/WaterfallModal.tsx`

- Instrucciones claras: "El jugador que sac√≥ la carta empieza a beber"
- Lista de jugadores en orden (sentido agujas del reloj)
- Indicador visual: "Jugador X est√° bebiendo..."
- Cada jugador se activa cuando el anterior empieza
- El primero puede parar cuando quiera
- Los dem√°s solo pueden parar cuando pare el anterior
- Bot√≥n "Finalizar cascada"

#### **C.9 - Carta Joker: Regla del Payaso (35 min)**
**Componente:** `src/components/cardGame/JokerRuleModal.tsx`

- Mostrar regla aleatoria del banco
- Descripci√≥n completa + penalizaci√≥n
- Si ya hay 2 reglas activas: Mostrar las 2 actuales y preguntar cu√°l eliminar
- Agregar a `activeRules[]` (m√°ximo 2)
- Mostrar permanentemente en secci√≥n "Reglas Activas"
- Animaci√≥n especial de "payaso" o emoji ü§°

---

### **FASE D: La Botella - Completa (5 horas)**

#### **D.1 - Pantalla y Animaci√≥n (1h 30min)**
**Archivo:** `src/screens/BottleGameScreen.tsx`
**Componente:** `src/components/bottle/BottleSpinner.tsx`

Estructura:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       üçæ LA BOTELLA üî•             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ
‚îÇ   Turno de: Ana                     ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ      ‚îÇ           ‚îÇ                  ‚îÇ
‚îÇ      ‚îÇ  [BOTELLA]‚îÇ ‚Üê Animaci√≥n 2D   ‚îÇ
‚îÇ      ‚îÇ  girando  ‚îÇ                  ‚îÇ
‚îÇ      ‚îÇ           ‚îÇ                  ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   üë§ Ana  ‚Üí  Luis üë§               ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   Veces juntos: 3                   ‚îÇ
‚îÇ   Nivel actual: PICO üíã             ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ   ‚îÇ  BESO   ‚îÇ  ‚îÇ PRUEBA  ‚îÇ         ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   [Siguiente]                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Animaci√≥n:**
- Imagen/SVG de botella en el centro
- Rotaci√≥n animada con `Animated.timing()`
- Easing suave (2-3 segundos)
- Al finalizar, apunta a jugador aleatorio

#### **D.2 - L√≥gica del Juego (1h)**
**Archivo:** `src/hooks/useBottleGame.ts`

Funciones:
- `spinBottle()` - Anima botella y elige jugador aleatorio
- `getPairHistory()` - Obtiene historial de pareja espec√≠fica
- `incrementPairLevel()` - Sube nivel de pareja
- `getCurrentLevel()` - Obtiene nivel actual de pareja
- `resetGame()` - Reinicia todos los niveles

**Estado:**
```typescript
interface BottleGameState {
  players: Player[];
  currentSpinner: string; // ID del jugador que gira
  targetPlayer: string | null; // ID del jugador objetivo
  isSpinning: boolean;
  pairHistory: Map<string, PairData>; // Key: "player1_player2"
}

interface PairData {
  player1Id: string;
  player2Id: string;
  level: number; // 1-5
  timesMatched: number;
}
```

#### **D.3 - Banco de Pruebas (1h)**
**Archivo:** `src/data/bottle/dares.ts`

**Estructura:**
```typescript
interface BottleDare {
  id: string;
  level: 1 | 2 | 3 | 4 | 5;
  description: string;
  type: 'physical' | 'verbal' | 'intimate';
}
```

**Cantidad por nivel:**
- Nivel 1: 8 pruebas suaves
- Nivel 2: 8 pruebas medias
- Nivel 3: 8 pruebas picantes
- Nivel 4: 8 pruebas muy picantes
- Nivel 5: 8 pruebas extremas

**Total:** 40 pruebas

**Tipos:**
- **Physical:** Flexiones, abdominales, bailar, etc.
- **Verbal:** Contar an√©cdota, chiste, confesar, etc.
- **Intimate:** Masajes, sentarse juntos, intercambiar ropa, etc.

#### **D.4 - Modales de Beso/Prueba (1h)**
**Componentes:**
- `src/components/bottle/KissModal.tsx`
- `src/components/bottle/DareModal.tsx`

**KissModal:**
- Muestra nombre del beso seg√∫n nivel
- Descripci√≥n breve
- Emoji visual üíã
- Bot√≥n "¬°Hecho!"

**DareModal:**
- Muestra prueba aleatoria del nivel actual
- Descripci√≥n completa
- Timer opcional (para pruebas con tiempo)
- Checkbox "¬øLo cumpli√≥?" (opcional)
- Bot√≥n "Continuar"

#### **D.5 - UI de Escalado (30 min)**
**Componente:** `src/components/bottle/LevelIndicator.tsx`

- Barra de progreso visual (5 niveles)
- Indicador del nivel actual
- Nombres de los niveles:
  1. Mejilla
  2. Comisura
  3. Pico
  4. Morreo
  5. L√≠o
- Emoji que cambia seg√∫n nivel: üòä ‚Üí üòò ‚Üí üíã ‚Üí üî• ‚Üí üå∂Ô∏è

---

### **FASE E: Integraci√≥n y Polish (2 horas)**

#### **E.1 - Navegaci√≥n desde HomeScreen (30 min)**
**Modificar:** `src/screens/HomeScreen.tsx`

Agregar dos botones nuevos:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     üçª YO NUNCA - INICIO            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ
‚îÇ   [Jugar Yo Nunca]                  ‚îÇ
‚îÇ   [Modo Detectives]                 ‚îÇ
‚îÇ   [Multiplayer Local]               ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   üéÆ NUEVOS JUEGOS:                 ‚îÇ
‚îÇ   [üÉè El Rey de Copas]              ‚îÇ
‚îÇ   [üçæ La Botella]                   ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   [Frases Personalizadas]           ‚îÇ
‚îÇ   [Estad√≠sticas]                    ‚îÇ
‚îÇ   [Configuraci√≥n]                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **E.2 - Navegaci√≥n en AppNavigator (15 min)**
**Modificar:** `src/navigation/AppNavigator.tsx`

Agregar rutas:
```typescript
<Stack.Screen
  name="CardGame"
  component={CardGameScreen}
  options={{ headerShown: false }}
/>
<Stack.Screen
  name="BottleGame"
  component={BottleGameScreen}
  options={{ headerShown: false }}
/>
```

Actualizar tipos en `src/types/index.ts`:
```typescript
export type RootStackParamList = {
  // ... rutas existentes
  CardGame: { players: Player[] };
  BottleGame: { players: Player[] };
};
```

#### **E.3 - PlayerSetup para nuevos juegos (30 min)**

**Opci√≥n A:** Reutilizar `PlayerSetupScreen` existente
- Agregar par√°metro `gameType: 'yonunca' | 'detectives' | 'cardgame' | 'bottle'`
- Condicionar la navegaci√≥n seg√∫n `gameType`

**Opci√≥n B:** Crear setup espec√≠fico para cada juego
- Menos flexible pero m√°s espec√≠fico

**Recomendaci√≥n:** Opci√≥n A (reutilizar)

#### **E.4 - Testing Completo (30 min)**

Checklist:
- [ ] Todas las 50 cartas funcionan correctamente
- [ ] Progresi√≥n del 9 (1‚Üí2‚Üí3‚Üí4) funciona
- [ ] Reglas del Joker se acumulan (m√°x 2)
- [ ] Cascada funciona correctamente
- [ ] No mirar a los ojos se activa/desactiva bien
- [ ] Categor√≠as cargan aleatoriamente
- [ ] Verdad o Reto mezcla bien
- [ ] Botella anima correctamente
- [ ] Niveles de escalado aumentan bien
- [ ] Pruebas se asignan seg√∫n nivel
- [ ] Navegaci√≥n fluida desde Home
- [ ] No hay crashes ni bugs visuales

#### **E.5 - Ajustes de UX (15 min)**

- Vibraci√≥n h√°ptica en eventos clave (sacar carta, girar botella)
- Animaciones suaves en transiciones
- Sonidos opcionales (opcional, no prioritario)
- Mensajes de ayuda ("¬øC√≥mo jugar?")
- Confirmaciones antes de resetear juego

---

## üìÅ RESUMEN DE ARCHIVOS A CREAR/MODIFICAR

### **Archivos NUEVOS (12 archivos):**

#### Tipos:
1. `src/types/cardGame.ts`

#### Datos:
2. `src/data/cardGame/categories.ts`
3. `src/data/cardGame/jokerRules.ts`
4. `src/data/cardGame/truthsAndDares.ts`
5. `src/data/bottle/dares.ts`

#### Pantallas:
6. `src/screens/CardGameScreen.tsx`
7. `src/screens/BottleGameScreen.tsx`

#### Componentes:
8. `src/components/cardGame/CardDisplay.tsx`
9. `src/components/cardGame/ActiveRulesDisplay.tsx`
10. `src/components/bottle/BottleSpinner.tsx`

#### Hooks:
11. `src/hooks/useCardGame.ts`
12. `src/hooks/useBottleGame.ts`

### **Archivos MODIFICADOS (3 archivos):**

1. `src/types/index.ts` - Agregar rutas CardGame y BottleGame
2. `src/navigation/AppNavigator.tsx` - Agregar screens
3. `src/screens/HomeScreen.tsx` - Agregar botones de nuevos juegos

---

## ‚è±Ô∏è ESTIMACI√ìN DE TIEMPOS

| Fase | Tarea | Tiempo |
|------|-------|--------|
| **A** | El Rey de Copas - Base | 3h |
| **B** | Bancos de Contenido | 2h |
| **C** | Efectos de Cartas | 3h |
| **D** | La Botella - Completa | 5h |
| **E** | Integraci√≥n y Polish | 2h |
| **TOTAL** | | **15h** |

**Desglose:**
- El Rey de Copas: ~8-10 horas
- La Botella: ~5 horas
- Integraci√≥n: ~2 horas

---

## ‚úÖ CRITERIOS DE √âXITO

### **Funcionales:**
- [ ] 50 cartas implementadas con efectos correctos
- [ ] Progresi√≥n del 9 funciona (1‚Üí2‚Üí3‚Üí4 tragos)
- [ ] Reglas del Joker se acumulan correctamente (m√°x 2)
- [ ] Cascada implementada (primero para cuando quiera)
- [ ] No mirar a los ojos se activa/desactiva bien
- [ ] 40 categor√≠as diferentes disponibles
- [ ] 60 verdades y retos mezclados
- [ ] Botella gira y elige jugador aleatorio
- [ ] Sistema de escalado funciona (5 niveles)
- [ ] Tracking de parejas correcto
- [ ] 40 pruebas distribuidas en 5 niveles

### **UX:**
- [ ] Animaciones suaves y sin lag
- [ ] Vibraci√≥n h√°ptica en eventos clave
- [ ] UI clara y f√°cil de entender
- [ ] Reglas activas visibles todo el tiempo
- [ ] Navegaci√≥n fluida desde Home
- [ ] Responsive en diferentes tama√±os de pantalla

### **T√©cnicos:**
- [ ] Sin errores de TypeScript
- [ ] Sin crashes ni bugs cr√≠ticos
- [ ] C√≥digo limpio y comentado
- [ ] Performance optimizado
- [ ] Backwards compatible con V3.0

---

## üöÄ SIGUIENTE SESI√ìN - QUICK START

Para la pr√≥xima sesi√≥n, empezar por:

1. **Leer este plan completo** ‚úÖ
2. **Crear estructura de carpetas:**
   ```
   src/
   ‚îú‚îÄ‚îÄ data/
   ‚îÇ   ‚îú‚îÄ‚îÄ cardGame/
   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ categories.ts
   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jokerRules.ts
   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ truthsAndDares.ts
   ‚îÇ   ‚îî‚îÄ‚îÄ bottle/
   ‚îÇ       ‚îî‚îÄ‚îÄ dares.ts
   ‚îú‚îÄ‚îÄ components/
   ‚îÇ   ‚îú‚îÄ‚îÄ cardGame/
   ‚îÇ   ‚îî‚îÄ‚îÄ bottle/
   ```
3. **Empezar con FASE A.1** - Crear tipos TypeScript
4. **Continuar secuencialmente** por las fases

---

## üìù NOTAS IMPORTANTES

### **Decisiones de Dise√±o Confirmadas:**
- ‚úÖ Joker: Reglas se **acumulan** (m√°x 2 simult√°neas)
- ‚úÖ Verdad o Reto: Todas **mezcladas** (sin niveles)
- ‚úÖ Categor√≠as: **40 categor√≠as** variadas
- ‚úÖ Palos: Solo **est√©tico** (sin efectos especiales)
- ‚úÖ Cascada: Primero **para cuando quiera**, resto para con anterior
- ‚úÖ Animaci√≥n Botella: **2D simple** con rotaci√≥n suave
- ‚úÖ Niveles de besos: Mejilla ‚Üí Comisura ‚Üí Pico ‚Üí Morreo ‚Üí L√≠o
- ‚úÖ Pruebas: **Retos + f√≠sicas** (opci√≥n C)
- ‚úÖ Orden: Primero **Baraja**, luego **Botella**
- ‚úÖ Nombres: "**El Rey de Copas**" y "**La Botella**"

### **Compatibilidad:**
- Toda la funcionalidad V3.0 se mantiene intacta
- Los nuevos juegos son **adicionales**, no reemplazan nada
- Reutilizar componentes y l√≥gica existente donde sea posible

### **Performance:**
- Baraja de 50 cartas ‚Üí no deber√≠a haber lag
- Animaci√≥n de botella ‚Üí usar `Animated` nativo de React Native
- Evitar re-renders innecesarios con `React.memo` y `useCallback`

---

## üéØ OBJETIVO FINAL

Al completar V4.0, la app **"Yo Nunca"** tendr√°:

1. **5 modos de juego diferentes:**
   - Modo Normal (Yo Nunca cl√°sico)
   - Modo Detectives (con votaci√≥n)
   - Multiplayer Local TCP (WiFi)
   - **El Rey de Copas** üÉè (NUEVO)
   - **La Botella** üçæ (NUEVO)

2. **377 frases refactorizadas** + interacci√≥n social mejorada

3. **Experiencia completa de fiesta** con variedad de mec√°nicas

4. **Production-ready** con toda la infraestructura V3.0 (age gate, pol√≠ticas, rachas, vibraci√≥n, etc.)

---

**¬°Que empiece la fiesta! üéâüÉèüçæüçª**

---

**Autor:** Claude Code
**Fecha:** 2025-10-26
**Versi√≥n del plan:** 4.0
**Tiempo total estimado:** 15 horas
